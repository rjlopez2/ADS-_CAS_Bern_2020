glimpse()
df <- home_dir %>%
# reg %>%
#   glimpse()
# df <- home_dir %>%
home_dir
home_dir <- getwd()
# df <- home_dir %>%
home_dir
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/")
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load(file = .)
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load(file = .)
# df <- home_dir %>%
var <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load(file = .)
# reg %>%
#   glimpse()
rm(var)
century21_reg <- reg %>%
filter(year >= 2000)
# df <- home_dir %>%
reg <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load(file = .)
century21_reg <- reg %>%
filter(year >= 2000)
# reg %>%
#   glimpse()
reg
# df <- home_dir %>%
reg <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load()
# reg %>%
#   glimpse()
reg
pacman::p_load(tidyverse, readxl)
home_dir <- getwd()
# df <- home_dir %>%
reg <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.rdata",
sep = "/") %>%
load()
# reg %>%
#   glimpse()
reg
# df <- home_dir %>%
reg <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load()
# df <- home_dir %>%
reg <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(.)
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(.)
# reg %>%
#   glimpse()
rm(reg)
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(.)
# df <- home_dir %>%
# home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(.)
# df <- home_dir %>%
# home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(file = .)
?load
# df <- home_dir %>%
# home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/")# %>%
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/")# %>%
load(file = ., envir = .GlobalEnv)
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(file = ., envir = .GlobalEnv)
century21_reg <- reg %>%
filter(year >= 2000)
century21_reg %>%
head
century21_reg %>%
distinct(year)
century21_reg %>%
distinct(country.name)
century21_reg %>%
select(country.name, year, regime.name., startyear, endyear, historical_date, reginfo)
century21_reg %>%
select(country.name, year, regime.name., startyear, endyear, historical_date, reginfo) %>%
distinct(country.name)
century21_reg %>%
select(country.name, year, regime.name., startyear, endyear, historical_date, reginfo)
century21_reg %>%
select(country.name, year, reginfo, startyear, endyear, historical_date )
century21_reg %>%
head
csv_file <- home_dir %>%
paste("raw_files_dataset", sep = "/") %>%
read_csv()
csv_file <- home_dir %>%
paste("raw_files_dataset",
"csv",
sep = "/") %>%
read_csv()
csv_file <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.csv",
sep = "/") %>%
read_csv()
csv_file
read_csv(., col_names = F
csv_file <- home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.csv",
sep = "/") %>%
read_csv(., col_names = F)
csv_file %>%
head
rm(csv_file)
my_vars = c("country.name", "year", "reginfo", "startyear", "endyear", "historical_date")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars))
century21_reg %>%
head
my_vars = c("country.name", "year", "startyear", "endyear", "historical_date", "reginfo")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars))
century21_reg %>%
head
century21_reg %>%
View()
century21_reg %>%
select(country.name, year, reginfo, startyear, endyear, historical_date)
reg %>%
head(5)
reg %>%
str
reg %>%
as.tibble()
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg %>%
View()
century21_reg %>%
str
century21_reg %>%
head
century21_reg %>%
group_by(country.name, year)
century21_reg %>%
group_by(country.name, year) %>%
distinct()
century21_reg %>%
# group_by(country.name, year) %>%
distinct(country.name, year)
century21_reg %>%
# group_by(country.name, year) %>%
distinct(country.name)
century21_reg %>%
filter(country.name == "Peru")
century21_reg %>%
filter(country.name == "Greece")
century21_reg %>%
filter(country.name == "Greece") %>%
pivot_wider(names_from = year)
century21_reg %>%
filter(country.name == "Greece") #%>%
pivot_wider(values_from = year)
century21_reg %>%
filter(country.name == "Greece") %>%
pivot_wider(values_from = year)
century21_reg %>%
filter(country.name == "Greece")
century21_reg %>%
filter(country.name == "USA")
century21_reg %>%
filter(country.name == "Canada")
reg %>%
head
my_vars = c("country.name", "year", "startyear", "endyear", "historical_date","regime.name.",  "reginfo")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg %>%
View()
century21_reg %>%
filter(country.name == "Canada")
- home_dir %>%
#   paste("r
reg %>%
head
reg %>%
head
my_vars = c("country.name", "year", "startyear", "endyear",
"historical_date","regime.name.",  "reginfo", "notes.to.v3regenddate")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg %>%
filter(country.name == "Canada")
my_vars = c("country.name", "year", "startyear", "endyear",
"regime.name.",  "reginfo", "notes.to.v3regenddate")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg %>%
filter(country.name == "Canada")
century21_reg %>%
filter(country.name == "Venezuela")
century21_reg %>%
filter(country.name == "Colombia")
century21_reg %>%
filter(country.name == "Colombia")
century21_reg %>%
filter(country.name == "Bolivia")
pacman::p_load(tidyverse, readxl)
home_dir <- getwd()
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(file = ., envir = .GlobalEnv)
reg
my_vars = c("country.name", "year", "startyear", "endyear",
"regime.name.",  "reginfo", "notes.to.v3regenddate")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg
library(haven)
rm(list=ls())
setwd("C:/Users/torewig_adm/Dropbox/Regimes and types of breakdowns paper/Data")
library(changepoint)
library(MCMCpack)
library(coda)
library(haven)
data <- read_dta("data_v3.dta")
#TRYING THIS OUT WITH REGEND
names(data)
data$regchange <- data$regchange
c <- aggregate(data$regchange, by=list(data$year), FUN=mean, na.rm=T)
colnames(c) <- c("year", "regtrans")
c <- c[order(c$year),]
c2 <- as.ts(c$regtrans, start=1789)
summary(c2)
sd(c2)
fit.1 <- MCMCregressChange(c2 ~ 1, m=4,
b0=mean(c2), B0=0.035, c0=0.001, d0=0.001,
burnin=1000, mcmc=30000, thin=10, verbose=0)
summary(fit.1)
names(fit.1)
structure(fit.1)
pdf("regendchangepoints_v2.pdf",h=8,w=12)
plotState(fit.1, start=1789, main="Posterior probability of different states (All transitions)", )
dev.off()
pdf("regendchangepoints2_v2.pdf")
plotChangepoint(fit.1, start=1789, main="Posterior probability of change-points (All transitions)")
dev.off()
points <- plotChangepoint(fit.1, start=1789, main="Posterior probability of change-points (All transitions)")
print(points)
change
pdf("regendchangepoints3_v2.pdf", h=8,w=12)
par(mfrow=c(1,1))
c3 <- data.frame(c2)
years <- seq(from=1, to=227, by=1)
years2 <- years+1789
c3 <- cbind(c3, years2)
loess <- predict(loess(c3$c2 ~ c3$years, span=0.3))
plot(c3$years,c3$c2, type="l", xlab="Year", ylab="% of countries experiencing regime change",
col="red", lwd=1, main="% regime changes and change-points, 1789-2016", cex.axis=1.5,cex.lab=1.5)
lines(c3$years,loess, col="grey", type="l", add=T,lwd=6)
for(i in 1:4){
abline(v=points[i], col="blue", lwd=2)
text(points[i]+8,.16, paste(points[i]), col = "black", cex=1.2)
}
legend("bottomright", legend=c("Frequency", "Changepoint", "Loess smoothed average"), col=c("red", "blue", "grey"), lwd=2)
dev.off()
####USING THE ABOVE CHAGE POINT FUNCTIONS TO ANALYZE COUPS, UPRISINGS AND LIBERALIZATION
###############COUPS
data$regtrans <- data$coup
name <- "coups"
c <- aggregate(data$regtrans, by=list(data$year), FUN=mean, na.rm=T)
colnames(c) <- c("year", "regchange")
c <- c[order(c$year),]
c2 <- as.ts(c$regchange, start=1789)
fit.1 <- MCMCregressChange(c2 ~ 1, m=2,
b0=mean(c2), B0=sd(c2), c0=0.001, d0=0.001,
burnin=1000, mcmc=30000, thin=10, verbose=0)
pdf(paste(name,"changepoints.pdf"),h=8,w=12)
plot1 <- plotState(fit.1, start=1789, main=paste("Posterior probability of different states (",name,")"))
dev.off()
pdf(paste(name,"changepoints2.pdf"))
plotChangepoint(fit.1, start=1789, main=paste("Posterior probability of change-points (",name,")"))
dev.off()
points <- plotChangepoint(fit.1, start=1789)
print(points)
pdf(paste(name,"changepoints3.pdf"),h=8,w=12)
par(mfrow=c(1,1))
c3 <- data.frame(c2)
years <- seq(from=1, to=227, by=1)
years2 <- years+1789
c3 <- cbind(c3, years2)
loess <- predict(loess(c3$c2 ~ c3$years, span=0.3))
plot(c3$years,c3$c2, type="l", xlab="Year", ylab=paste("% of countries experiencing",name),
col="red", lwd=1, main=paste("%",name,"and change-points, 1789-2016"))
lines(c3$years,loess, col="grey", type="l", add=T,lwd=6)
for(i in 1:2){
abline(v=points[i], col="blue", lwd=2)
text(points[i]+8,.06, paste(points[i]), col = "black", cex=1.2)
}
legend("bottomright", legend=c("Frequency", "Changepoint", "Loess smoothed average"), col=c("red", "blue", "grey"), lwd=2)
dev.off()
####UPRISINGS
data$regtrans <- data$uprising
name <- "uprisings"
c <- aggregate(data$regtrans, by=list(data$year), FUN=mean, na.rm=T)
colnames(c) <- c("year", "regchange")
c <- c[order(c$year),]
c2 <- as.ts(c$regchange, start=1789)
fit.1 <- MCMCregressChange(c2 ~ 1, m=6,
b0=mean(c2), B0=sd(c2), c0=0.001, d0=0.001,
burnin=1000, mcmc=30000, thin=10, verbose=0)
pdf(paste(name,"changepoints.pdf"), h=8, w=12)
plot1 <- plotState(fit.1, start=1789, main=paste("Posterior probability of different states (",name,")"))
dev.off()
pdf(paste(name,"changepoints2.pdf"))
plotChangepoint(fit.1, start=1789, main=paste("Posterior probability of change-points (",name,")"))
dev.off()
points <- plotChangepoint(fit.1, start=1789)
print(points)
pdf(paste(name,"changepoints3.pdf"), h=8, w=12)
par(mfrow=c(1,1))
c3 <- data.frame(c2)
years <- seq(from=1, to=227, by=1)
years2 <- years+1789
c3 <- cbind(c3, years2)
loess <- predict(loess(c3$c2 ~ c3$years, span=0.3))
plot(c3$years,c3$c2, type="l", xlab="Year", ylab=paste("% of countries experiencing",name),
col="red", lwd=1, main=paste("%",name,"and change-points, 1789-2016"))
lines(c3$years,loess, col="grey", type="l", add=T,lwd=6)
for(i in 1:4){
abline(v=points[i], col="blue", lwd=2)
text(points[i]+8,.06, paste(points[i]), col = "black", cex=1.2)
}
legend("bottomright", legend=c("Frequency", "Changepoint", "Loess smoothed average"), col=c("red", "blue", "grey"), lwd=2)
dev.off()
####LIBERALIZATION
data$regtrans <- data$reglib
name <- "liberalization"
c <- aggregate(data$regtrans, by=list(data$year), FUN=mean, na.rm=T)
colnames(c) <- c("year", "regchange")
c <- c[order(c$year),]
c2 <- as.ts(c$regchange, start=1789)
fit.1 <- MCMCregressChange(c2 ~ 1, m=4,
b0=mean(c2), B0=0.05, c0=0.001, d0=0.001,
burnin=1000, mcmc=30000, thin=10, verbose=0)
pdf(paste(name,"changepoints.pdf"))
plot1 <- plotState(fit.1, start=1789, main=paste("Posterior probability of different states (",name,")"))
dev.off()
pdf(paste(name,"changepoints2.pdf"))
plotChangepoint(fit.1, start=1789, main=paste("Posterior probability of change-points (",name,")"))
dev.off()
points <- plotChangepoint(fit.1, start=1789)
print(points)
pdf(paste(name,"changepoints3.pdf"))
par(mfrow=c(1,1))
c3 <- data.frame(c2)
years <- seq(from=1, to=227, by=1)
years2 <- years+1789
c3 <- cbind(c3, years2)
plot(c3$years,c3$c2, type="l", xlab="Year", ylab=paste("% of countries experiencing",name),
col="red", lwd=1, main=paste("%",name,"and change-points, 1789-2016"))
for(i in 1:4){
abline(v=points[i], col="blue", lwd=2)
text(points[i]+5,(max(c3$c2)-.01), paste(points[i]), col = "black")
}
dev.off()
####INTERSTATE WARS
data$regtrans <- data$warint
name <- "war"
c <- aggregate(data$regtrans, by=list(data$year), FUN=mean, na.rm=T)
colnames(c) <- c("year", "regchange")
c <- c[order(c$year),]
c2 <- as.ts(c$regchange, start=1789)
fit.1 <- MCMCregressChange(c2 ~ 1, m=4,
b0=mean(c2), B0=0.05, c0=0.001, d0=0.001,
burnin=1000, mcmc=30000, thin=10, verbose=0)
pdf(paste(name,"changepoints.pdf"))
plot1 <- plotState(fit.1, start=1789, main=paste("Posterior probability of different states (",name,")"))
dev.off()
pdf(paste(name,"changepoints2.pdf"))
plotChangepoint(fit.1, start=1789, main=paste("Posterior probability of change-points (",name,")"))
dev.off()
points <- plotChangepoint(fit.1, start=1789)
print(points)
pdf(paste(name,"changepoints3.pdf"))
par(mfrow=c(1,1))
c3 <- data.frame(c2)
years <- seq(from=1, to=227, by=1)
years2 <- years+1789
c3 <- cbind(c3, years2)
plot(c3$years,c3$c2, type="l", xlab="Year", ylab=paste("% of countries experiencing",name),
col="red", lwd=1, main=paste("%",name,"and change-points, 1789-2016"))
for(i in 1:4){
abline(v=points[i], col="blue", lwd=2)
text(points[i]+5,(max(c3$c2)-.01), paste(points[i]), col = "black")
}
dev.off()
pacman::p_load(tidyverse, readxl)
home_dir <- getwd()
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(file = ., envir = .GlobalEnv)
reg <- subset(reg, endyear==1848 & year==1848)
reg <- subset(reg, country.name!="Bolivia" & country.name!="Mexico" & country.name!="Guatemala" & country.name!="Canada"  )
#recoding prussia (fixing)
reg$endyear[reg$startyear==1701 & reg$endyear==1848] <- 1813
reg <- subset(reg, endyear!=1813)
reg$Date <- as.Date(reg$v3regenddate, "%d/%m/%Y")
reg$event <- 1
pdf("1848.pdf", h=8, w=10)
plot( reg$Date, reg$duration, xaxt="n", type = "h",  lwd=2, col="red",
ylim=c(0,160),xlab="Date of regime change", ylab="Duration of regime (years)", main="Dated regime changes in Europe in 1848")
axis(1, reg$Date, format(reg$Date, "%b %d"), cex.axis = .8)
text(reg$Date, reg$duration+9, labels=reg$country.name, cex= .8, srt = 90)
dev.off()
century21_reg %>%
filter(country.name == "Peru")
pacman::p_load(tidyverse, readxl)
home_dir <- getwd()
# df <- home_dir %>%
home_dir %>%
paste("raw_files_dataset",
"HRD_countryyear.RData",
sep = "/") %>%
load(file = ., envir = .GlobalEnv)
my_vars = c("country.name", "year", "startyear", "endyear",
"regime.name.",  "reginfo", "notes.to.v3regenddate")
century21_reg <- reg %>%
filter(year >= 2000) %>%
select(all_of(my_vars)) %>%
as.tibble()
century21_reg %>%
filter(country.name == "Peru")
century21_reg %>%
filter(country.name == "Canada")
century21_reg %>%
filter(country.name == "Cuba")
century21_reg %>%
filter(country.name == "Colombia")
century21_reg %>%
filter(country.name == "Peru")
